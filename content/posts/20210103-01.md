---
title: "QGISで基盤地図情報を表示する(2)"
date: 2021-01-03T19:33:56+09:00
draft: false
tags: [qgis, python, geotiff]
slug: gdal
---
前回記事で無事に変換できると思っていたが、いざやってみると画像変換時点でつまずいてしまった。どうやらgdalをpythonで使えるようにするため、QGISだけではなくきちんとインストールする必要がありそうだった。

検索の結果、以下のページが出た。  
悪魔のGDAL for OSX  
https://qiita.com/harmegiddo/items/fa7ca59e636489990edb　　
ひとまずHomebrewでgdalをインストールする。
```zsh
brew install gdal
```
この結果、夥しい量の依存関係とともにgdalがインストールされる。あまりに多かったので少し頭を抱える。

その後`gdal-config --version`を確認すると、きちんとインストールされていることが確認出来た。そのため、次の手順である「pipでインストールしたことにする」を実施した。以下のコマンドは元記事のコピーであり、自分がやったことを忘れずに記録するためのものである。

```zsh
pip install GDAL==$(gdal-config --version | awk -F'[.]' '{print $1"."$2}')
```

ここまで実施したところ、問題なく前回記事のgeotiff変換が行えることを確認した。

ところで、GISで色々と点を打ってみると新たな発見があって面白い。

{{< img src="/image/20210103-01.png" title="城などプロットしてみる" >}}

標高データを重ねてみると、安芸武田氏の佐東銀山城も熊谷氏の三入高松城も山上に築かれていることがわかる。対して香川氏の八木城は川沿いに見える。ストリートビューを見るときちんとこの辺りも小高い丘になっていることがわかるので、使用した数値標高モデルが5mではなく10mメッシュだったことや、色分けの段階が粗かったことなどが理由として考えられる。
