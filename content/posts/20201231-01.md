---
title: "QGISで基盤地図情報を表示する(1)"
date: 2020-12-31T18:48:00+09:00
draft: false
tags: [qgis, geotiff]
slug: qgis-dem
---
多分何回かかかりそうなので。ひとまずは数値標高モデルから

## 数値標高モデルのダウンロード
基盤地図情報のダウンロードページからダウンロードする。  
https://fgd.gsi.go.jp/download/menu.php

## geotiffに変換する
やり方を調べたけれど、これが一番やりやすかった。  
Pythonを用いた基盤地図情報 数値標高データのgeotiff変換  
https://qiita.com/HidKamiya/items/66b1d98503301446460c

コマンドとして`python zdem2tif.py`のあとに続ける引数のファイル名を一括で生成したかったので、ちょっと頑張ってシェルスクリプトを書いた。
```zsh
ls | grep DEM10B | xargs echo -n > filelist.txt
```

得られたファイルリストをそのまま貼り付けた。本当は一気に.shで書き上げてしまいたかったけど時間切れ。いつか考える。

## QGISに読み込ませる
geotiffに変換したラスタデータを読み込ませて表示させてみた。

{{< img src="/image/20201231-01.png" title="ラスタデータを読み込ませた" >}}

なんとなくグリッドが入っているように見えるが、これはラスタデータの切れ目を表している。おそらくデータごとに最大値と最小値でスケーリングさせているものと思われる。色別標高図を作る時は、これらを統合してしまった方が楽なので統合を行う。メニューの[ラスタ] > [その他] > [結合(gdal_merge)]で結合を行うことができる。ここができなかったせいでmacOSの再インストールを敢行することになった。

{{< img src="/image/20201231-02.png" title="ラスタデータを結合した" >}}

ここまできてようやく色別標高図を作成できる。レイヤのプロパティからレンダリングタイプを単バンド擬似カラー、カラーランプをSpectralに設定したものが以下の通り。

{{< img src="/image/20201231-03.png" title="色別標高図の作成" >}}

国土数値情報のベクタデータを読み込ませて重ねてみた。

{{< img src="/image/20201231-04.png" title="色別標高図の作成" >}}

色々付け足していけば、しばらく遊べそう。
